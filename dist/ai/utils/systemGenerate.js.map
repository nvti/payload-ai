{"version":3,"sources":["../../../src/ai/utils/systemGenerate.ts"],"sourcesContent":["import { anthropic } from '@ai-sdk/anthropic'\nimport { openai } from '@ai-sdk/openai'\nimport { generateText } from 'ai'\n\nimport { PLUGIN_DEFAULT_ANTHROPIC_MODEL, PLUGIN_DEFAULT_OPENAI_MODEL } from '../../defaults.js'\n\nexport const systemGenerate = async (\n  data: { prompt: string; system: string },\n  generateTextFn?: (prompt: string, system: string) => Promise<string>,\n) => {\n  const { prompt, system } = data\n\n  if (generateTextFn) {\n    return generateTextFn(prompt, system)\n  }\n\n  let model = null\n\n  // If the generateTextFn is not provided, still need OPENAI_API_KEY or ANTHROPIC_API_KEY to initialize\n  if (process.env.OPENAI_API_KEY) {\n    model = openai(PLUGIN_DEFAULT_OPENAI_MODEL)\n  } else if (process.env.ANTHROPIC_API_KEY) {\n    model = anthropic(PLUGIN_DEFAULT_ANTHROPIC_MODEL)\n  } else {\n    throw new Error('- AI Plugin: Please check your environment variables!')\n  }\n\n  const { text } = await generateText({\n    model,\n    prompt,\n    system,\n  })\n\n  return text\n}\n"],"names":["anthropic","openai","generateText","PLUGIN_DEFAULT_ANTHROPIC_MODEL","PLUGIN_DEFAULT_OPENAI_MODEL","systemGenerate","data","generateTextFn","prompt","system","model","process","env","OPENAI_API_KEY","ANTHROPIC_API_KEY","Error","text"],"mappings":"AAAA,SAASA,SAAS,QAAQ,oBAAmB;AAC7C,SAASC,MAAM,QAAQ,iBAAgB;AACvC,SAASC,YAAY,QAAQ,KAAI;AAEjC,SAASC,8BAA8B,EAAEC,2BAA2B,QAAQ,oBAAmB;AAE/F,OAAO,MAAMC,iBAAiB,OAC5BC,MACAC;IAEA,MAAM,EAAEC,MAAM,EAAEC,MAAM,EAAE,GAAGH;IAE3B,IAAIC,gBAAgB;QAClB,OAAOA,eAAeC,QAAQC;IAChC;IAEA,IAAIC,QAAQ;IAEZ,sGAAsG;IACtG,IAAIC,QAAQC,GAAG,CAACC,cAAc,EAAE;QAC9BH,QAAQT,OAAOG;IACjB,OAAO,IAAIO,QAAQC,GAAG,CAACE,iBAAiB,EAAE;QACxCJ,QAAQV,UAAUG;IACpB,OAAO;QACL,MAAM,IAAIY,MAAM;IAClB;IAEA,MAAM,EAAEC,IAAI,EAAE,GAAG,MAAMd,aAAa;QAClCQ;QACAF;QACAC;IACF;IAEA,OAAOO;AACT,EAAC"}